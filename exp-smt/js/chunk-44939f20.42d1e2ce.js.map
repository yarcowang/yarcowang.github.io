{"version":3,"sources":["webpack:///./src/views/StaticDiagram.vue?378b","webpack:///./src/views/StaticDiagram.vue?0369","webpack:///./src/components/ErdRelationChooser.vue?730c","webpack:///src/components/ErdRelationChooser.vue","webpack:///./src/components/ErdRelationChooser.vue?e17f","webpack:///./src/components/ErdRelationChooser.vue","webpack:///src/views/StaticDiagram.vue","webpack:///./src/views/StaticDiagram.vue?b408","webpack:///./src/views/StaticDiagram.vue?619a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","on","$event","showCreateNoun","directives","name","rawName","value","expression","domProps","target","composing","noun","err001","type","indexOf","_k","keyCode","key","newNoun","_s","_e","_l","idx","class","del","usedVocabularies","bold","addNode","removeNoun","classesFinishedRate","isGenerated","imageData","downloadFilename","generateImage","saveDiagram","ref","tmpSelectionData","isLink","convertOrUpdateToTask","data","isDone","onChangeIsDone","checked","_m","onChangeClassName","properties","length","property","onChangeProperties","access","removeProperty","from","fromT","onErdRelationChooserChange","to","toT","staticRenderFns","$emit","component","$store","commit","taskId","id","diagram","model","addNodeData","isChanged"],"mappings":"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","file":"js/chunk-44939f20.42d1e2ce.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StaticDiagram.vue?vue&type=style&index=0&id=f3d03084&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StaticDiagram.vue?vue&type=style&index=0&id=f3d03084&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-2\"},[_c('h6',[_c('i',{staticClass:\"fas fa-project-diagram\"}),_c('fa-icon',{attrs:{\"icon\":\"object-ungroup\"}}),_vm._v(\" Nouns\")],1),_c('div',[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){_vm.showCreateNoun=!_vm.showCreateNoun}}},[_c('fa-icon',{attrs:{\"icon\":\"plus-square\"}})],1)]),(_vm.showCreateNoun)?_c('div',{staticClass:\"row no-gutters\"},[_c('div',{staticClass:\"col-10\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.noun),expression:\"noun\"}],staticClass:\"form-control form-control-sm\",attrs:{\"type\":\"text\",\"placeholder\":\"Noun\"},domProps:{\"value\":(_vm.noun)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.noun=$event.target.value},function($event){_vm.err001=''}],\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.newNoun()}}}),(_vm.err001)?_c('span',{staticClass:\"badge text-danger\"},[_vm._v(_vm._s(_vm.err001))]):_vm._e()]),_c('div',{staticClass:\"col-2\"},[_c('a',{staticClass:\"btn btn-sm text-danger\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){_vm.showCreateNoun=!_vm.showCreateNoun}}},[_c('fa-icon',{attrs:{\"icon\":\"ban\"}})],1)])]):_vm._e(),_vm._l((_vm.nouns),function(noun,idx){return _c('div',{key:idx,staticClass:\"row no-gutters\"},[_c('div',{staticClass:\"col\"},[_c('small',{class:{del:_vm.usedVocabularies.indexOf(noun)!==-1, bold:_vm.usedVocabularies.indexOf(noun)===-1}},[_vm._v(_vm._s(noun))]),_c('ul',{staticClass:\"list-inline mb-0\"},[_c('li',{staticClass:\"list-inline-item\"},[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.addNode(noun, 'object', 'object')}}},[_c('fa-icon',{attrs:{\"icon\":\"dice-d6\"}})],1)]),_c('li',{staticClass:\"list-inline-item\"},[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.addNode(noun, 'object', 'actor')}}},[_c('fa-icon',{attrs:{\"icon\":\"user\"}})],1)]),_c('li',{staticClass:\"list-inline-item\"},[_c('a',{staticClass:\"text-danger\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.removeNoun(idx)}}},[_c('fa-icon',{attrs:{\"icon\":\"trash\"}})],1)])])])])}),_c('div',[_vm._v(_vm._s(_vm.classesFinishedRate)+\" \"),_c('fa-icon',{attrs:{\"icon\":\"percentage\"}})],1)],2),_c('div',{staticClass:\"col-8\"},[_c('div',{staticClass:\"row\"},[_c('ul',{staticClass:\"list-inline mb-0 mt-1\"},[(!_vm.isGenerated)?_c('li',{staticClass:\"list-inline-item\"},[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.generateImage()}}},[_c('fa-icon',{attrs:{\"icon\":\"image\"}}),_vm._v(\" Generate Image\")],1)]):_c('li',{staticClass:\"list-inline-item\"},[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){_vm.isGenerated=false}}},[_c('fa-icon',{attrs:{\"icon\":\"undo\"}})],1),_vm._v(\"Â \\n                    \"),_c('file-download',{attrs:{\"isPng\":true,\"title\":\"Download Diagram\",\"data\":_vm.imageData,\"downloadName\":_vm.downloadFilename}})],1),(_vm.isChanged)?_c('li',{staticClass:\"list-inline-item\"},[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.saveDiagram()}}},[_c('fa-icon',{attrs:{\"icon\":\"save\"}}),_vm._v(\" Save Diagram\")],1)]):_vm._e()])]),_c('div',{staticClass:\"row\"},[_c('div',{ref:\"staticDiagram\",staticClass:\"col\",attrs:{\"id\":\"static-diagram\"}})])]),_c('div',{staticClass:\"col-2 pt-4\"},[_c('div',{staticClass:\"mb-3\",attrs:{\"id\":\"static-diagram-overview\"}}),(_vm.tmpSelectionData.isLink===false)?_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"},[_c('button',{staticClass:\"btn btn-warning btn-sm\",on:{\"click\":function($event){return _vm.convertOrUpdateToTask()}}},[_vm._v(\"Convert/Update to Task\")])])]):_vm._e(),(_vm.tmpSelectionData.isLink===false)?_c('div',[_c('div',{staticClass:\"row\"},[_c('label',{staticClass:\"col-8 col-form-label\",attrs:{\"for\":\"mark-as-done\"}},[_vm._v(\"Mark as done\")]),_c('div',{staticClass:\"col-4\"},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\",\"id\":\"mark-as-done\"},domProps:{\"checked\":_vm.tmpSelectionData.data.isDone},on:{\"change\":function($event){return _vm.onChangeIsDone($event.target.checked)}}})])]),_vm._m(0),_c('div',{staticClass:\"input-group input-group-sm mb-3\"},[_vm._m(1),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":_vm.tmpSelectionData.data.key},on:{\"input\":function($event){return _vm.onChangeClassName($event.target.value)}}})]),(_vm.tmpSelectionData.data.properties.length > 0)?_c('div',{staticClass:\"input-group input-group-sm\"},[_c('h6',[_vm._v(\"Attributes:\")])]):_vm._e(),_vm._l((_vm.tmpSelectionData.data.properties),function(property,idx){return _c('div',{key:idx,staticClass:\"input-group input-group-sm\"},[_c('div',{staticClass:\"input-group-prepend\"},[_c('div',{staticClass:\"input-group-text pointer\",on:{\"click\":function($event){return _vm.onChangeProperties(idx, 'access', property.access === 'public' ? 'static' : 'public')}}},[_vm._v(_vm._s(property.access))])]),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":property.property},on:{\"input\":function($event){return _vm.onChangeProperties(idx, 'property', $event.target.value)}}}),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":property.type},on:{\"input\":function($event){return _vm.onChangeProperties(idx, 'type', $event.target.value)}}}),_c('a',{staticClass:\"text-danger fix\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.removeProperty(idx)}}},[_c('fa-icon',{attrs:{\"icon\":\"ban\"}})],1)])})],2):_vm._e(),(_vm.tmpSelectionData.isLink)?_c('div',[_vm._m(2),_c('div',{staticClass:\"input-group input-group-sm\"},[_vm._m(3),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"disabled\":\"\"},domProps:{\"value\":_vm.tmpSelectionData.data.from}})]),_c('erd-relation-chooser',{attrs:{\"value\":_vm.tmpSelectionData.data.fromT},on:{\"change\":function($event){return _vm.onErdRelationChooserChange($event, 'fromT')}}}),_c('div',{staticClass:\"input-group input-group-sm mt-2\"},[_vm._m(4),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"disabled\":\"\"},domProps:{\"value\":_vm.tmpSelectionData.data.to}})]),_c('erd-relation-chooser',{attrs:{\"value\":_vm.tmpSelectionData.data.toT},on:{\"change\":function($event){return _vm.onErdRelationChooserChange($event, 'toT')}}})],1):_vm._e()])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h6',[_c('b',[_vm._v(\"Class Attributes:\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-group-prepend\"},[_c('div',{staticClass:\"input-group-text\"},[_vm._v(\"Name: \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h6',[_c('b',[_vm._v(\"Relationships:\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-group-prepend\"},[_c('div',{staticClass:\"input-group-text\"},[_vm._v(\"From: \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-group-prepend\"},[_c('div',{staticClass:\"input-group-text\"},[_vm._v(\"To: \")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-group input-group-sm\"},[_c('select',{staticClass:\"form-control\",domProps:{\"value\":_vm.value},on:{\"change\":function($event){return _vm.$emit('change', $event.target.value)}}},[_c('option',{attrs:{\"value\":\"zero2one\"}},[_vm._v(\"O| - Zero to One\")]),_c('option',{attrs:{\"value\":\"one2one\"}},[_vm._v(\"|| - One to One\")]),_c('option',{attrs:{\"value\":\"zero2many\"}},[_vm._v(\"O< - Zero to Many\")]),_c('option',{attrs:{\"value\":\"one2many\"}},[_vm._v(\"|< - One to Many\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"input-group input-group-sm\">\n        <select class=\"form-control\" :value=\"value\" @change=\"$emit('change', $event.target.value)\">\n            <option value=\"zero2one\">O| - Zero to One</option>\n            <option value=\"one2one\">|| - One to One</option>\n            <option value=\"zero2many\">O&lt; - Zero to Many</option>\n            <option value=\"one2many\">|&lt; - One to Many</option>\n        </select>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"ErdRelationChooser\",\n        props: {\n            title: {type: String, default: ''},\n            value: {type: String},\n        }\n    }\n</script>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ErdRelationChooser.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ErdRelationChooser.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ErdRelationChooser.vue?vue&type=template&id=4a714d33&\"\nimport script from \"./ErdRelationChooser.vue?vue&type=script&lang=js&\"\nexport * from \"./ErdRelationChooser.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"row\">\n        <div class=\"col-2\">\n            <h6><i class=\"fas fa-project-diagram\"></i> <fa-icon icon=\"object-ungroup\" /> Nouns</h6>\n            <div><a href=\"javascript:;\" @click=\"showCreateNoun=!showCreateNoun\"><fa-icon icon=\"plus-square\" /></a></div>\n            <div v-if=\"showCreateNoun\" class=\"row no-gutters\">\n                <div class=\"col-10\">\n                    <input class=\"form-control form-control-sm\" type=\"text\" placeholder=\"Noun\" v-model=\"noun\" @input=\"err001=''\" @keyup.enter=\"newNoun()\" />\n                    <span v-if=\"err001\" class=\"badge text-danger\">{{ err001 }}</span>\n                </div>\n                <div class=\"col-2\">\n                    <a href=\"javascript:;\" class=\"btn btn-sm text-danger\" @click=\"showCreateNoun=!showCreateNoun\"><fa-icon icon=\"ban\" /></a>\n                </div>\n            </div>\n            <div class=\"row no-gutters\" v-for=\"(noun, idx) in nouns\" :key=\"idx\">\n                <div class=\"col\">\n                    <small :class=\"{del:usedVocabularies.indexOf(noun)!==-1, bold:usedVocabularies.indexOf(noun)===-1}\">{{ noun }}</small>\n                    <ul class=\"list-inline mb-0\">\n                        <li class=\"list-inline-item\">\n                            <a href=\"javascript:;\" @click=\"addNode(noun, 'object', 'object')\"><fa-icon icon=\"dice-d6\" /></a>\n                        </li>\n                        <li class=\"list-inline-item\">\n                            <a href=\"javascript:;\" @click=\"addNode(noun, 'object', 'actor')\"><fa-icon icon=\"user\" /></a>\n                        </li>\n                        <li class=\"list-inline-item\">\n                            <a href=\"javascript:;\" class=\"text-danger\" @click=\"removeNoun(idx)\"><fa-icon icon=\"trash\" /></a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div>{{ classesFinishedRate }} <fa-icon icon=\"percentage\" /></div>\n        </div>\n\n        <div class=\"col-8\">\n            <!-- Diagram Buttons -->\n            <div class=\"row\">\n                <ul class=\"list-inline mb-0 mt-1\">\n                    <li v-if=\"!isGenerated\" class=\"list-inline-item\">\n                        <a href=\"javascript:;\" @click=\"generateImage()\"><fa-icon icon=\"image\" /> Generate Image</a>\n                    </li>\n                    <li v-else class=\"list-inline-item\">\n                        <a href=\"javascript:;\" @click=\"isGenerated=false\"><fa-icon icon=\"undo\" /></a>&nbsp;\n                        <file-download :isPng=\"true\" title=\"Download Diagram\" :data=\"imageData\" :downloadName=\"downloadFilename\" />\n                    </li>\n                    <li v-if=\"isChanged\" class=\"list-inline-item\">\n                        <a href=\"javascript:;\" @click=\"saveDiagram()\"><fa-icon icon=\"save\" /> Save Diagram</a>\n                    </li>\n                </ul>\n            </div>\n            <div class=\"row\">\n                <div id=\"static-diagram\" ref=\"staticDiagram\" class=\"col\"></div>\n            </div>\n        </div>\n\n        <div class=\"col-2 pt-4\">\n            <div id=\"static-diagram-overview\" class=\"mb-3\"></div>\n            <div v-if=\"tmpSelectionData.isLink===false\" class=\"row\">\n                <div class=\"col\">\n                    <button class=\"btn btn-warning btn-sm\" @click=\"convertOrUpdateToTask()\">Convert/Update to Task</button>\n                </div>\n            </div>\n            <div v-if=\"tmpSelectionData.isLink===false\">\n                <div class=\"row\">\n                    <label for=\"mark-as-done\" class=\"col-8 col-form-label\">Mark as done</label>\n                    <div class=\"col-4\">\n                        <input type=\"checkbox\" id=\"mark-as-done\" class=\"form-control\" :checked=\"tmpSelectionData.data.isDone\" @change=\"onChangeIsDone($event.target.checked)\"/>\n                    </div>\n                </div>\n                <h6><b>Class Attributes:</b></h6>\n                <div class=\"input-group input-group-sm mb-3\">\n                    <div class=\"input-group-prepend\">\n                        <div class=\"input-group-text\">Name: </div>\n                    </div>\n                    <input type=\"text\" class=\"form-control\" :value=\"tmpSelectionData.data.key\" @input=\"onChangeClassName($event.target.value)\" />\n                </div>\n                <div v-if=\"tmpSelectionData.data.properties.length > 0\" class=\"input-group input-group-sm\">\n                    <h6>Attributes:</h6>\n                </div>\n                <div class=\"input-group input-group-sm\" v-for=\"(property, idx) in tmpSelectionData.data.properties\" :key=\"idx\">\n                    <div class=\"input-group-prepend\">\n                        <div class=\"input-group-text pointer\" @click=\"onChangeProperties(idx, 'access', property.access === 'public' ? 'static' : 'public')\">{{ property.access }}</div>\n                    </div>\n                    <input type=\"text\" class=\"form-control\" :value=\"property.property\" @input=\"onChangeProperties(idx, 'property', $event.target.value)\" />\n                    <input type=\"text\" class=\"form-control\" :value=\"property.type\" @input=\"onChangeProperties(idx, 'type', $event.target.value)\" />\n                    <a href=\"javascript:;\" class=\"text-danger fix\" @click=\"removeProperty(idx)\"><fa-icon icon=\"ban\" /></a>\n                </div>\n            </div>\n            <div v-if=\"tmpSelectionData.isLink\">\n                <h6><b>Relationships:</b></h6>\n                <div class=\"input-group input-group-sm\">\n                    <div class=\"input-group-prepend\">\n                        <div class=\"input-group-text\">From: </div>\n                    </div>\n                    <input type=\"text\" class=\"form-control\" disabled :value=\"tmpSelectionData.data.from\" />\n                </div>\n                <erd-relation-chooser :value=\"tmpSelectionData.data.fromT\" @change=\"onErdRelationChooserChange($event, 'fromT')\" />\n                <div class=\"input-group input-group-sm mt-2\">\n                    <div class=\"input-group-prepend\">\n                        <div class=\"input-group-text\">To: </div>\n                    </div>\n                    <input type=\"text\" class=\"form-control\" disabled :value=\"tmpSelectionData.data.to\" />\n                </div>\n                <erd-relation-chooser :value=\"tmpSelectionData.data.toT\" @change=\"onErdRelationChooserChange($event, 'toT')\" />\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import slug from 'slug';\n    import moment from 'moment';\n    import * as go from 'gojs';\n    import { mapState } from 'vuex';\n    import { StaticDiagramObjectNode, StaticDiagramLink, TmpStaticDiagramLink } from '../gotpls';\n    import { VOCABULARY_SET_USED,VOCABULARY_NOUN_ADD,VOCABULARY_NOUN_REMOVE,DIAGRAM_SET, TASK_ADD, TASK_SET} from '../mutation-types';\n    import FileDownload from '@/components/FileDownload';\n    import ErdRelationChooser from '@/components/ErdRelationChooser';\n\n    const $ = go.GraphObject.make;\n\n\n    export default {\n        name: \"StaticDiagram\",\n\n        computed: {\n            ...mapState(['project', 'nouns', 'diagrams', 'used']),\n            usedVocabularies() {\n                return this.used.map(v => v.v);\n            },\n            downloadFilename() {\n                return slug(this.project.name, {mode: 'rfc3986'}) + '_static.png';\n            },\n            newClass: function() {\n                return function(key, category) {\n                    return {key, category, isDone: false, properties: [], loc: ''};\n                };\n            },\n            selectedItem() {\n                return this.diagram.selection.first();\n            },\n            classesFinishedRate() {\n                return this.finishedRate;\n            }\n        },\n\n        data() {\n            return {\n                err001: null,\n                showCreateNoun: false,\n                noun: '',\n                finishedRate: 0,\n\n                imageData: '',\n                isGenerated: false,\n                isChanged: false,\n\n                diagram: {},\n\n                tmpSelectionData: {},\n            }\n        },\n\n        mounted() {\n            this.diagram = $(go.Diagram, this.$refs.staticDiagram, {\n                layout: $(go.ForceDirectedLayout),\n                'undoManager.isEnabled': true,\n                'ChangedSelection': e => { this.onChangedSelection(e); },\n            });\n\n            let nodeTpls = new go.Map();\n            nodeTpls.add('object', StaticDiagramObjectNode);\n            this.diagram.nodeTemplateMap = nodeTpls;\n            // let linkTpls = new go.Map();\n            // this.diagram.linkTemplateMap = linkTpls;\n            this.diagram.linkTemplate = StaticDiagramLink;\n\n            this.diagram.contextMenu = $('ContextMenu',\n                $('ContextMenuButton',\n                    $(go.TextBlock, {margin: new go.Margin(6, 10, 6, 10), font: 'bold .8rem \"Nunito\",sans-serif'}, 'New Class'), {click: e => {\n                        e.diagram.commit(async d => {\n                            const data = this.newClass('New Class', 'object');\n                            d.model.addNodeData(data);\n                            const part = d.findPartForData(data);\n                            part.location = d.toolManager.contextMenuTool.mouseDownPoint;\n                        });\n                    }}\n                )\n            );\n            this.diagram.toolManager.linkingTool.temporaryLink = TmpStaticDiagramLink;\n            this.diagram.toolManager.linkingTool.archetypeLinkData = {fromT: 'zero2many', toT: 'zero2many'};\n\n            this.diagram.commandHandler.doKeyDown = () => {\n                const e = this.diagram.lastInput;\n                // add new property\n                if (e.key.charCodeAt(0) === 13 && this.selectedItem instanceof go.Node) {\n                    // insert property\n                    this.diagram.model.commit(m => {\n                        m.insertArrayItem(this.selectedItem.data.properties, -1, {access: 'public', property: 'property', type: 'string'});\n                    }, 'new property');\n                    return;\n                }\n                go.CommandHandler.prototype.doKeyDown.call(this.diagram.commandHandler);\n            };\n\n            if (this.diagrams.static) {\n                this.diagram.model = go.Model.fromJson(this.diagrams.static);\n            } else {\n                this.diagram.model = $(go.GraphLinksModel, {nodeDataArray: [], linkDataArray: []});\n            }\n            const overview = $(go.Overview, 'static-diagram-overview', {observed: this.diagram, contentAlignment: go.Spot.Center});\n            overview.box.elt(0).stroke = $(go.Brush, go.Brush.Solid, {color: 'red'});\n            this.caculateFinishedRate();\n            this.diagram.addModelChangedListener(evt => {\n                this.isChanged = true;\n                if (evt.isTransactionFinished) {\n                    this.caculateFinishedRate();\n                    this.saveModel(evt.model);\n                }\n            });\n        },\n\n        methods: {\n            async newNoun() {\n                let vocabulary = await this.$db.vocabularies.get({pid: this.project.id});\n                if (vocabulary) {\n                    if (vocabulary.nouns.indexOf(this.noun) === -1) {\n                        vocabulary.nouns.push(this.noun);\n                        await this.$db.vocabularies.update(vocabulary.id, {nouns: vocabulary.nouns});\n                    }\n                } else {\n                    vocabulary = {pid: this.project.id, nouns:[this.noun], verbs:[], used:[]};\n                    await this.$db.vocabularies.add(vocabulary);\n                }\n                this.$store.commit(VOCABULARY_NOUN_ADD, this.noun);\n            },\n\n            async removeNoun(idx) {\n                const noun = this.nouns[idx];\n                let vocabulary = await this.$db.vocabularies.get({pid: this.project.id});\n                let i;\n                if ((i = vocabulary.nouns.indexOf(noun)) !== -1) {\n                    vocabulary.nouns.splice(i, 1);\n                    await this.$db.vocabularies.update(vocabulary.id, {nouns: vocabulary.nouns});\n                }\n                this.$store.commit(VOCABULARY_NOUN_REMOVE, idx);\n            },\n\n            caculateFinishedRate() {\n                const total = this.diagram.model.nodeDataArray.length;\n                if (total === 0) return 0;\n                const n = this.diagram.model.nodeDataArray.reduce((i, v) => {\n                    return v.isDone ? ++i : i;\n                }, 0);\n                this.finishedRate = (n / total * 100).toFixed(0);\n            },\n\n            generateImage() {\n                this.imageData = this.diagram.makeImageData({scale: 1});\n                this.isGenerated = true;\n            },\n\n            async addNode(noun, category, type) {\n                // also add task\n                const id = await this.$store.dispatch('addTask', {db: this.$db, from: 'static', task: noun});\n\n                let data = this.newClass(noun, category);\n                data.taskId = id;\n                this.diagram.model.addNodeData(data);\n\n                if (this.usedVocabularies.indexOf(noun) === -1) { // not found, add to `used`\n                    let vocabulary = await this.$db.vocabularies.get({pid: this.project.id});\n                    if (vocabulary) {\n                        typeof vocabulary.used !== 'undefined' ?\n                            vocabulary.used.push({v:noun,t:type}) :\n                            (vocabulary.used = [{v:noun,t:type}])\n                        ;\n                        await this.$db.vocabularies.update(vocabulary.id, {used: vocabulary.used});\n                    }\n                    this.$store.commit(VOCABULARY_SET_USED, {v:noun,t:type});\n                }\n            },\n\n            saveModel(model) {\n                const json = model.toJson();\n                this.$store.commit(DIAGRAM_SET, {isStatic: true, data: json});\n            },\n\n            async saveDiagram() {\n                let diagram = await this.$db.diagrams.get({pid: this.project.id});\n                if (!diagram) {\n                    await this.$db.diagrams.add({pid: this.project.id, static: this.diagrams.static, dynamic: '{\"class\":\"TreeModel\", \"nodeDataArray\": []}'});\n                } else {\n                    await this.$db.diagrams.update(diagram.id, {static: this.diagrams.static});\n                }\n                this.isChanged = false;\n            },\n\n            async convertOrUpdateToTask() {\n                if (typeof this.selectedItem.data.taskId === 'undefined') {\n                    // add to task\n                    const id = await this.$store.dispatch('addTask', {db: this.$db, from: 'static', task: this.selectedItem.data.key});\n                    this.diagram.model.commit(m => {\n                        m.set(this.selectedItem.data, 'taskId', id);\n                    }, 'set task id');\n                } else {\n                    // update task\n                    await this.$db.tasks.update(this.selectedItem.data.taskId, {task: this.selectedItem.data.key, isDone: this.selectedItem.data.isDone});\n                    this.$store.commit(TASK_SET, {id: this.selectedItem.data.taskId, task: this.selectedItem.data.key, isDone: this.selectedItem.data.isDone});\n                }\n            },\n\n            onChangeIsDone(v) {\n                this.tmpSelectionData.data.isDone = v;\n                if (this.selectedItem instanceof go.Node) {\n                    this.diagram.model.commit(m => {\n                        m.set(this.selectedItem.data, 'isDone', v);\n                    }, 'toggle done');\n                }\n            },\n\n            onChangeClassName(v) {\n                this.tmpSelectionData.data.key = v;\n                if (this.selectedItem instanceof go.Node) {\n                    this.diagram.model.commit(m => {\n                        m.set(this.selectedItem.data, 'key', v);\n                    }, 'change class name');\n                }\n            },\n\n            onChangeProperties(idx, key, v) {\n                if (this.selectedItem instanceof go.Node) {\n                    this.diagram.model.commit(m => {\n                        m.set(this.selectedItem.data.properties[idx], key, v);\n                    }, `change ${key} of attribute`);\n                }\n            },\n\n            removeProperty(idx) {\n                if (this.selectedItem instanceof go.Node) {\n                    this.diagram.model.commit(m => {\n                        m.removeArrayItem(this.selectedItem.data.properties, idx);\n                    }, 'remove property');\n                }\n            },\n\n            onChangedSelection(e) {\n                if (this.selectedItem instanceof go.Node) {\n                    // this.diagram.centerRect(this.selectedItem.actualBounds);\n                    return this.tmpSelectionData = {isLink: false, data: {...this.selectedItem.data}};\n                } else if (this.selectedItem instanceof go.Link) {\n                    return this.tmpSelectionData = {isLink: true, data: {...this.selectedItem.data}};\n                }\n                this.tmpSelectionData = {};\n            },\n\n            onErdRelationChooserChange(e, t) {\n                if (this.selectedItem instanceof go.Link) {\n                    // try to set the tmpSelectionData\n                    this.tmpSelectionData.data[t] = e;\n                    this.diagram.model.commit(m => {\n                        m.set(this.selectedItem.data, t, e);\n                    }, 'change ER arrow type');\n                }\n            },\n\n        },\n\n        components: {\n            FileDownload, ErdRelationChooser\n        }\n    }\n</script>\n\n<style scoped>\n    #static-diagram {\n        background-color: var(--white);\n        min-height: 30rem;\n    }\n\n    #static-diagram-overview {\n        /*width: 8rem;*/\n        height: 6rem;\n        background-color: white;\n        border: thin solid var(--primary);\n    }\n\n    .del {\n        text-decoration: line-through;\n    }\n\n    .bold {\n        font-weight: bold;\n    }\n\n    .fix {\n        position: relative;\n        left: .3rem;\n        top: .2rem;\n    }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StaticDiagram.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StaticDiagram.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StaticDiagram.vue?vue&type=template&id=f3d03084&scoped=true&\"\nimport script from \"./StaticDiagram.vue?vue&type=script&lang=js&\"\nexport * from \"./StaticDiagram.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StaticDiagram.vue?vue&type=style&index=0&id=f3d03084&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f3d03084\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}