(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44939f20"],{c865:function(t,e,a){"use strict";var n=a("ebab"),i=a.n(n);i.a},e3af:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("h6",[a("i",{staticClass:"fas fa-project-diagram"}),a("fa-icon",{attrs:{icon:"object-ungroup"}}),t._v(" Nouns")],1),a("div",[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.showCreateNoun=!t.showCreateNoun}}},[a("fa-icon",{attrs:{icon:"plus-square"}})],1)]),t.showCreateNoun?a("div",{staticClass:"row no-gutters"},[a("div",{staticClass:"col-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.noun,expression:"noun"}],staticClass:"form-control form-control-sm",attrs:{type:"text",placeholder:"Noun"},domProps:{value:t.noun},on:{input:[function(e){e.target.composing||(t.noun=e.target.value)},function(e){t.err001=""}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.newNoun()}}}),t.err001?a("span",{staticClass:"badge text-danger"},[t._v(t._s(t.err001))]):t._e()]),a("div",{staticClass:"col-2"},[a("a",{staticClass:"btn btn-sm text-danger",attrs:{href:"javascript:;"},on:{click:function(e){t.showCreateNoun=!t.showCreateNoun}}},[a("fa-icon",{attrs:{icon:"ban"}})],1)])]):t._e(),t._l(t.nouns,(function(e,n){return a("div",{key:n,staticClass:"row no-gutters"},[a("div",{staticClass:"col"},[a("small",{class:{del:-1!==t.usedVocabularies.indexOf(e),bold:-1===t.usedVocabularies.indexOf(e)}},[t._v(t._s(e))]),a("ul",{staticClass:"list-inline mb-0"},[a("li",{staticClass:"list-inline-item"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.addNode(e,"object","object")}}},[a("fa-icon",{attrs:{icon:"dice-d6"}})],1)]),a("li",{staticClass:"list-inline-item"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.addNode(e,"object","actor")}}},[a("fa-icon",{attrs:{icon:"user"}})],1)]),a("li",{staticClass:"list-inline-item"},[a("a",{staticClass:"text-danger",attrs:{href:"javascript:;"},on:{click:function(e){return t.removeNoun(n)}}},[a("fa-icon",{attrs:{icon:"trash"}})],1)])])])])})),a("div",[t._v(t._s(t.classesFinishedRate)+" "),a("fa-icon",{attrs:{icon:"percentage"}})],1)],2),a("div",{staticClass:"col-8"},[a("div",{staticClass:"row"},[a("ul",{staticClass:"list-inline mb-0 mt-1"},[t.isGenerated?a("li",{staticClass:"list-inline-item"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.isGenerated=!1}}},[a("fa-icon",{attrs:{icon:"undo"}})],1),t._v("Â \n                    "),a("file-download",{attrs:{isPng:!0,title:"Download Diagram",data:t.imageData,downloadName:t.downloadFilename}})],1):a("li",{staticClass:"list-inline-item"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.generateImage()}}},[a("fa-icon",{attrs:{icon:"image"}}),t._v(" Generate Image")],1)]),t.isChanged?a("li",{staticClass:"list-inline-item"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.saveDiagram()}}},[a("fa-icon",{attrs:{icon:"save"}}),t._v(" Save Diagram")],1)]):t._e()])]),a("div",{staticClass:"row"},[a("div",{ref:"staticDiagram",staticClass:"col",attrs:{id:"static-diagram"}})])]),a("div",{staticClass:"col-2 pt-4"},[a("div",{staticClass:"mb-3",attrs:{id:"static-diagram-overview"}}),!1===t.tmpSelectionData.isLink?a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-warning btn-sm",on:{click:function(e){return t.convertOrUpdateToTask()}}},[t._v("Convert/Update to Task")])])]):t._e(),!1===t.tmpSelectionData.isLink?a("div",[a("div",{staticClass:"row"},[a("label",{staticClass:"col-8 col-form-label",attrs:{for:"mark-as-done"}},[t._v("Mark as done")]),a("div",{staticClass:"col-4"},[a("input",{staticClass:"form-control",attrs:{type:"checkbox",id:"mark-as-done"},domProps:{checked:t.tmpSelectionData.data.isDone},on:{change:function(e){return t.onChangeIsDone(e.target.checked)}}})])]),t._m(0),a("div",{staticClass:"input-group input-group-sm mb-3"},[t._m(1),a("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.tmpSelectionData.data.key},on:{input:function(e){return t.onChangeClassName(e.target.value)}}})]),t.tmpSelectionData.data.properties.length>0?a("div",{staticClass:"input-group input-group-sm"},[a("h6",[t._v("Attributes:")])]):t._e(),t._l(t.tmpSelectionData.data.properties,(function(e,n){return a("div",{key:n,staticClass:"input-group input-group-sm"},[a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text pointer",on:{click:function(a){return t.onChangeProperties(n,"access","public"===e.access?"static":"public")}}},[t._v(t._s(e.access))])]),a("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.property},on:{input:function(e){return t.onChangeProperties(n,"property",e.target.value)}}}),a("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.type},on:{input:function(e){return t.onChangeProperties(n,"type",e.target.value)}}}),a("a",{staticClass:"text-danger fix",attrs:{href:"javascript:;"},on:{click:function(e){return t.removeProperty(n)}}},[a("fa-icon",{attrs:{icon:"ban"}})],1)])}))],2):t._e(),t.tmpSelectionData.isLink?a("div",[t._m(2),a("div",{staticClass:"input-group input-group-sm"},[t._m(3),a("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.tmpSelectionData.data.from}})]),a("erd-relation-chooser",{attrs:{value:t.tmpSelectionData.data.fromT},on:{change:function(e){return t.onErdRelationChooserChange(e,"fromT")}}}),a("div",{staticClass:"input-group input-group-sm mt-2"},[t._m(4),a("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.tmpSelectionData.data.to}})]),a("erd-relation-chooser",{attrs:{value:t.tmpSelectionData.data.toT},on:{change:function(e){return t.onErdRelationChooserChange(e,"toT")}}})],1):t._e()])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h6",[a("b",[t._v("Class Attributes:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("Name: ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h6",[a("b",[t._v("Relationships:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("From: ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("To: ")])])}],s=(a("8e6e"),a("ac6a"),a("456d"),a("96cf"),a("3b8d")),r=(a("7f7f"),a("bd86")),o=a("d3bd"),c=a.n(o),d=(a("c1df"),a("6f70")),u=a("2f62"),l=a("2400"),m=a("47e3"),p=a("af4f"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group input-group-sm"},[a("select",{staticClass:"form-control",domProps:{value:t.value},on:{change:function(e){return t.$emit("change",e.target.value)}}},[a("option",{attrs:{value:"zero2one"}},[t._v("O| - Zero to One")]),a("option",{attrs:{value:"one2one"}},[t._v("|| - One to One")]),a("option",{attrs:{value:"zero2many"}},[t._v("O< - Zero to Many")]),a("option",{attrs:{value:"one2many"}},[t._v("|< - One to Many")])])])},f=[],v={name:"ErdRelationChooser",props:{title:{type:String,default:""},value:{type:String}}},g=v,b=a("2877"),C=Object(b["a"])(g,h,f,!1,null,null,null),k=C.exports;function y(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function w(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?y(a,!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):y(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var x=d["GraphObject"].make,D={name:"StaticDiagram",computed:w({},Object(u["b"])(["project","nouns","diagrams","used"]),{usedVocabularies:function(){return this.used.map((function(t){return t.v}))},downloadFilename:function(){return c()(this.project.name,{mode:"rfc3986"})+"_static.png"},newClass:function(){return function(t,e){return{key:t,category:e,isDone:!1,properties:[],loc:""}}},selectedItem:function(){return this.diagram.selection.first()},classesFinishedRate:function(){return this.finishedRate}}),data:function(){return{err001:null,showCreateNoun:!1,noun:"",finishedRate:0,imageData:"",isGenerated:!1,isChanged:!1,diagram:{},tmpSelectionData:{}}},mounted:function(){var t=this;this.diagram=x(d["Diagram"],this.$refs.staticDiagram,{layout:x(d["ForceDirectedLayout"]),"undoManager.isEnabled":!0,ChangedSelection:function(e){t.onChangedSelection(e)}});var e=new d["Map"];e.add("object",l["h"]),this.diagram.nodeTemplateMap=e,this.diagram.linkTemplate=l["g"],this.diagram.contextMenu=x("ContextMenu",x("ContextMenuButton",x(d["TextBlock"],{margin:new d["Margin"](6,10,6,10),font:'bold .8rem "Nunito",sans-serif'},"New Class"),{click:function(e){e.diagram.commit(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.newClass("New Class","object"),a.model.addNodeData(n),i=a.findPartForData(n),i.location=a.toolManager.contextMenuTool.mouseDownPoint;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})),this.diagram.toolManager.linkingTool.temporaryLink=l["j"],this.diagram.toolManager.linkingTool.archetypeLinkData={fromT:"zero2many",toT:"zero2many"},this.diagram.commandHandler.doKeyDown=function(){var e=t.diagram.lastInput;13===e.key.charCodeAt(0)&&t.selectedItem instanceof d["Node"]?t.diagram.model.commit((function(e){e.insertArrayItem(t.selectedItem.data.properties,-1,{access:"public",property:"property",type:"string"})}),"new property"):d["CommandHandler"].prototype.doKeyDown.call(t.diagram.commandHandler)},this.diagrams.static?this.diagram.model=d["Model"].fromJson(this.diagrams.static):this.diagram.model=x(d["GraphLinksModel"],{nodeDataArray:[],linkDataArray:[]});var a=x(d["Overview"],"static-diagram-overview",{observed:this.diagram,contentAlignment:d["Spot"].Center});a.box.elt(0).stroke=x(d["Brush"],d["Brush"].Solid,{color:"red"}),this.caculateFinishedRate(),this.diagram.addModelChangedListener((function(e){t.isChanged=!0,e.isTransactionFinished&&(t.caculateFinishedRate(),t.saveModel(e.model))}))},methods:{newNoun:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$db.vocabularies.get({pid:this.project.id});case 2:if(e=t.sent,!e){t.next=10;break}if(-1!==e.nouns.indexOf(this.noun)){t.next=8;break}return e.nouns.push(this.noun),t.next=8,this.$db.vocabularies.update(e.id,{nouns:e.nouns});case 8:t.next=13;break;case 10:return e={pid:this.project.id,nouns:[this.noun],verbs:[],used:[]},t.next=13,this.$db.vocabularies.add(e);case 13:this.$store.commit(m["t"],this.noun);case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),removeNoun:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=this.nouns[e],t.next=3,this.$db.vocabularies.get({pid:this.project.id});case 3:if(n=t.sent,-1===(i=n.nouns.indexOf(a))){t.next=8;break}return n.nouns.splice(i,1),t.next=8,this.$db.vocabularies.update(n.id,{nouns:n.nouns});case 8:this.$store.commit(m["u"],e);case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),caculateFinishedRate:function(){var t=this.diagram.model.nodeDataArray.length;if(0===t)return 0;var e=this.diagram.model.nodeDataArray.reduce((function(t,e){return e.isDone?++t:t}),0);this.finishedRate=(e/t*100).toFixed(0)},generateImage:function(){this.imageData=this.diagram.makeImageData({scale:1}),this.isGenerated=!0},addNode:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e,a,n){var i,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("addTask",{db:this.$db,from:"static",task:e});case 2:if(i=t.sent,s=this.newClass(e,a),s.taskId=i,this.diagram.model.addNodeData(s),-1!==this.usedVocabularies.indexOf(e)){t.next=15;break}return t.next=9,this.$db.vocabularies.get({pid:this.project.id});case 9:if(r=t.sent,!r){t.next=14;break}return"undefined"!==typeof r.used?r.used.push({v:e,t:n}):r.used=[{v:e,t:n}],t.next=14,this.$db.vocabularies.update(r.id,{used:r.used});case 14:this.$store.commit(m["y"],{v:e,t:n});case 15:case"end":return t.stop()}}),t,this)})));function e(e,a,n){return t.apply(this,arguments)}return e}(),saveModel:function(t){var e=t.toJson();this.$store.commit(m["c"],{isStatic:!0,data:e})},saveDiagram:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$db.diagrams.get({pid:this.project.id});case 2:if(e=t.sent,e){t.next=8;break}return t.next=6,this.$db.diagrams.add({pid:this.project.id,static:this.diagrams.static,dynamic:'{"class":"TreeModel", "nodeDataArray": []}'});case 6:t.next=10;break;case 8:return t.next=10,this.$db.diagrams.update(e.id,{static:this.diagrams.static});case 10:this.isChanged=!1;case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),convertOrUpdateToTask:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("undefined"!==typeof this.selectedItem.data.taskId){t.next=7;break}return t.next=3,this.$store.dispatch("addTask",{db:this.$db,from:"static",task:this.selectedItem.data.key});case 3:e=t.sent,this.diagram.model.commit((function(t){t.set(a.selectedItem.data,"taskId",e)}),"set task id"),t.next=10;break;case 7:return t.next=9,this.$db.tasks.update(this.selectedItem.data.taskId,{task:this.selectedItem.data.key,isDone:this.selectedItem.data.isDone});case 9:this.$store.commit(m["o"],{id:this.selectedItem.data.taskId,task:this.selectedItem.data.key,isDone:this.selectedItem.data.isDone});case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onChangeIsDone:function(t){var e=this;this.tmpSelectionData.data.isDone=t,this.selectedItem instanceof d["Node"]&&this.diagram.model.commit((function(a){a.set(e.selectedItem.data,"isDone",t)}),"toggle done")},onChangeClassName:function(t){var e=this;this.tmpSelectionData.data.key=t,this.selectedItem instanceof d["Node"]&&this.diagram.model.commit((function(a){a.set(e.selectedItem.data,"key",t)}),"change class name")},onChangeProperties:function(t,e,a){var n=this;this.selectedItem instanceof d["Node"]&&this.diagram.model.commit((function(i){i.set(n.selectedItem.data.properties[t],e,a)}),"change ".concat(e," of attribute"))},removeProperty:function(t){var e=this;this.selectedItem instanceof d["Node"]&&this.diagram.model.commit((function(a){a.removeArrayItem(e.selectedItem.data.properties,t)}),"remove property")},onChangedSelection:function(t){return this.selectedItem instanceof d["Node"]?this.tmpSelectionData={isLink:!1,data:w({},this.selectedItem.data)}:this.selectedItem instanceof d["Link"]?this.tmpSelectionData={isLink:!0,data:w({},this.selectedItem.data)}:void(this.tmpSelectionData={})},onErdRelationChooserChange:function(t,e){var a=this;this.selectedItem instanceof d["Link"]&&(this.tmpSelectionData.data[e]=t,this.diagram.model.commit((function(n){n.set(a.selectedItem.data,e,t)}),"change ER arrow type"))}},components:{FileDownload:p["a"],ErdRelationChooser:k}},_=D,j=(a("c865"),Object(b["a"])(_,n,i,!1,null,"f3d03084",null));e["default"]=j.exports},ebab:function(t,e,a){}}]);
//# sourceMappingURL=chunk-44939f20.42d1e2ce.js.map