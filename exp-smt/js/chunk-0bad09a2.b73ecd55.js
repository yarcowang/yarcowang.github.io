(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bad09a2"],{b662:function(t,e,a){},e689:function(t,e,a){"use strict";var n=a("b662"),i=a.n(n);i.a},f391:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("h6",[a("i",{staticClass:"fas fa-project-diagram"}),a("fa-icon",{attrs:{icon:"running"}}),t._v(" Verbs")],1),a("div",[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.showCreateVerb=!t.showCreateVerb}}},[a("fa-icon",{attrs:{icon:"plus-square"}})],1)]),t.showCreateVerb?a("div",{staticClass:"row no-gutters"},[a("div",{staticClass:"col-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.verb,expression:"verb"}],staticClass:"form-control form-control-sm",attrs:{type:"text",placeholder:"Verb"},domProps:{value:t.verb},on:{input:[function(e){e.target.composing||(t.verb=e.target.value)},function(e){t.err001=""}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.newVerb()}}}),t.err001?a("span",{staticClass:"badge text-danger"},[t._v(t._s(t.err001))]):t._e()]),a("div",{staticClass:"col-2"},[a("a",{staticClass:"btn btn-sm text-danger",attrs:{href:"javascript:;"},on:{click:function(e){t.showCreateVerb=!t.showCreateVerb}}},[a("fa-icon",{attrs:{icon:"ban"}})],1)])]):t._e(),t._l(t.verbs,(function(e,n){return a("div",{key:n,staticClass:"row no-gutters"},[a("div",{staticClass:"col"},[a("small",{class:{del:-1!==t.usedVocabularies.indexOf(e),bold:-1===t.usedVocabularies.indexOf(e)}},[t._v(t._s(e))]),a("ul",{staticClass:"list-inline mb-0"},[a("li",{staticClass:"list-inline-item"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.addNode(e,"action")}}},[a("fa-icon",{attrs:{icon:"comment"}})],1)]),a("li",{staticClass:"list-inline-item"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.addNode(e,"activity")}}},[a("fa-icon",{attrs:{icon:"comment-alt"}})],1)]),a("li",{staticClass:"list-inline-item"},[a("a",{staticClass:"text-danger",attrs:{href:"javascript:;"},on:{click:function(e){return t.removeVerb(n)}}},[a("fa-icon",{attrs:{icon:"trash"}})],1)])])])])})),a("div",[t._v(t._s(t.functionsFinishedRate)+" "),a("fa-icon",{attrs:{icon:"percentage"}})],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col mt-3"},[a("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(e){return t.loadAllActors()}}},[a("fa-icon",{attrs:{icon:"users"}}),t._v(" Load All Actors")],1)])])],2),a("div",{staticClass:"col-8"},[a("div",{staticClass:"row"},[a("ul",{staticClass:"list-inline mb-0 mt-1"},[t.isGenerated?a("li",{staticClass:"list-inline-item"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.isGenerated=!1}}},[a("fa-icon",{attrs:{icon:"undo"}})],1),t._v("Â \n                    "),a("file-download",{attrs:{isPng:!0,title:"Download Diagram",data:t.imageData,downloadName:t.downloadFilename}})],1):a("li",{staticClass:"list-inline-item"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.generateImage()}}},[a("fa-icon",{attrs:{icon:"image"}}),t._v(" Generate Image")],1)]),t.isChanged?a("li",{staticClass:"list-inline-item"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.saveDiagram()}}},[a("fa-icon",{attrs:{icon:"save"}}),t._v(" Save Diagram")],1)]):t._e()])]),a("div",{staticClass:"row"},[a("div",{ref:"dynamicDiagram",staticClass:"col",attrs:{id:"dynamic-diagram"}})])]),a("div",{staticClass:"col-2 pt-4"},[a("div",{staticClass:"mb-3",attrs:{id:"dynamic-diagram-overview"}}),!1!==t.tmpSelectionData.isLink||"action"!==t.tmpSelectionData.data.category&&"activity"!==t.tmpSelectionData.data.category?t._e():a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-warning btn-sm",on:{click:function(e){return t.convertOrUpdateToTask()}}},[t._v("Convert/Update to Task")])])]),!1===t.tmpSelectionData.isLink?a("div",["action"===t.selectedItem.data.category||"activity"===t.selectedItem.data.category?a("div",{staticClass:"row"},[a("label",{staticClass:"col-8 col-form-label",attrs:{for:"mark-as-done"}},[t._v("Mark as done")]),a("div",{staticClass:"col-4"},[a("input",{staticClass:"form-control",attrs:{type:"checkbox",id:"mark-as-done"},domProps:{checked:t.tmpSelectionData.data.isDone},on:{change:function(e){return t.onChangeIsDone(e.target.checked)}}})])]):t._e(),a("div",{staticClass:"input-group input-group-sm mb-3"},[t._m(0),a("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.tmpSelectionData.data.key},on:{input:function(e){return t.onChangeKey(e.target.value)}}})])]):t._e()])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("Title: ")])])}],r=(a("8e6e"),a("ac6a"),a("456d"),a("96cf"),a("3b8d")),s=(a("7f7f"),a("bd86")),o=a("d3bd"),c=a.n(o),d=a("6f70"),l=a("2f62"),u=a("2400"),m=a("47e3"),h=a("af4f");function f(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function v(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(a,!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p=d["GraphObject"].make,g={actor:"action",action:"start",start:"activity",activity:"activity"},b={start:"start",end:"end",actor:"New Actor",action:"New Action",activity:"New Activity"},k={name:"DynamicDiagram",computed:v({},Object(l["b"])(["project","verbs","diagrams","used"]),{usedVocabularies:function(){return this.used.map((function(t){return t.v}))},downloadFilename:function(){return c()(this.project.name,{mode:"rfc3986"})+"_dynamic.png"},newNode:function(){return function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null===t&&(t=b[e]),{key:t,category:e,parent:a,isDone:!1}}},selectedItem:function(){return this.diagram.selection.first()},functionsFinishedRate:function(){return this.finishedRate}}),data:function(){return{err001:null,showCreateVerb:!1,verb:"",finishedRate:0,imageData:"",isGenerated:!1,isChanged:!1,diagram:{},tmpSelectionData:{}}},mounted:function(){var t=this;this.diagram=p(d["Diagram"],this.$refs.dynamicDiagram,{layout:p(d["TreeLayout"]),"commandHandler.deletesTree":!0,"undoManager.isEnabled":!0,ChangedSelection:function(e){t.onChangedSelection(e)}});var e=new d["Map"];e.add("actor",u["e"]),e.add("action",u["a"]),e.add("start",u["f"]),e.add("activity",u["b"]),e.add("end",u["c"]),this.diagram.nodeTemplateMap=e,this.diagram.linkTemplate=u["d"],this.diagram.contextMenu=p("ContextMenu",p("ContextMenuButton",p(d["TextBlock"],{margin:new d["Margin"](6,10,6,10),font:'bold .8rem "Nunito",sans-serif'},"New Actor"),{click:this.onContextMenuButtonClick("New Actor","actor")}),p("ContextMenuButton",p(d["TextBlock"],{margin:new d["Margin"](6,10,6,10),font:'bold .8rem "Nunito",sans-serif'},"New Action"),{click:this.onContextMenuButtonClick("New Action","action")}),p("ContextMenuButton",p(d["TextBlock"],{margin:new d["Margin"](6,10,6,10),font:'bold .8rem "Nunito",sans-serif'},"Start Point"),{click:this.onContextMenuButtonClick("start","start")}),p("ContextMenuButton",p(d["TextBlock"],{margin:new d["Margin"](6,10,6,10),font:'bold .8rem "Nunito",sans-serif'},"New Activity"),{click:this.onContextMenuButtonClick("New Activity","activity")}),p("ContextMenuButton",p(d["TextBlock"],{margin:new d["Margin"](6,10,6,10),font:'bold .8rem "Nunito",sans-serif'},"End Point"),{click:this.onContextMenuButtonClick("end","end")})),this.diagram.toolManager.linkingTool.temporaryLink=u["i"],this.diagram.commandHandler.doKeyDown=function(){var e=t.diagram.lastInput;9===e.key.charCodeAt(0)&&t.selectedItem instanceof d["Node"]&&"undefined"!==typeof g[t.selectedItem.data.category]?t.diagram.model.commit((function(e){var a=t.newNode(null,g[t.selectedItem.data.category],t.selectedItem.data.key);e.addNodeData(a);var n=t.diagram.findNodeForData(a);t.diagram.select(n)}),"new item"):d["CommandHandler"].prototype.doKeyDown.call(t.diagram.commandHandler)},this.diagrams.dynamic?this.diagram.model=d["Model"].fromJson(this.diagrams.dynamic):this.diagram.model=p(d["TreeModel"],{nodeDataArray:[],linkDataArray:[]});var a=p(d["Overview"],"dynamic-diagram-overview",{observed:this.diagram,contentAlignment:d["Spot"].Center});a.box.elt(0).stroke=p(d["Brush"],d["Brush"].Solid,{color:"red"}),this.caculateFinishedRate(),this.diagram.addModelChangedListener((function(e){t.isChanged=!0,e.isTransactionFinished&&(t.caculateFinishedRate(),t.saveModel(e.model))}))},methods:{newVerb:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$db.vocabularies.get({pid:this.project.id});case 2:if(e=t.sent,!e){t.next=10;break}if(-1!==e.verbs.indexOf(this.verb)){t.next=8;break}return e.verbs.push(this.verb),t.next=8,this.$db.vocabularies.update(e.id,{verbs:e.verbs});case 8:t.next=13;break;case 10:return e={pid:this.project.id,nouns:[],verbs:[this.verb],used:[]},t.next=13,this.$db.vocabularies.add(e);case 13:this.$store.commit(m["z"],this.verb);case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),removeVerb:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=this.verbs[e],t.next=3,this.$db.vocabularies.get({pid:this.project.id});case 3:if(n=t.sent,-1===(i=n.verbs.indexOf(a))){t.next=8;break}return n.verbs.splice(i,1),t.next=8,this.$db.vocabularies.update(n.id,{verbs:n.verbs});case 8:this.$store.commit(m["A"],e);case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),caculateFinishedRate:function(){var t=this.diagram.model.nodeDataArray.reduce((function(t,e){return"action"===e.category||"activity"===e.category?++t:t}),0);if(0===t)return 0;var e=this.diagram.model.nodeDataArray.reduce((function(t,e){return"action"!==e.category&&"activity"!==e.category||!e.isDone?t:++t}),0);this.finishedRate=(e/t*100).toFixed(0)},loadAllActors:function(){var t=this;this.used.map((function(e){if("actor"===e.t){var a=t.newNode(e.v,"actor");t.diagram.model.addNodeData(a)}}))},onContextMenuButtonClick:function(t,e){var a=this;return function(n){n.diagram.commit((function(n){var i=a.newNode(t,e);n.model.addNodeData(i);var r=n.findPartForData(i);r.location=n.toolManager.contextMenuTool.mouseDownPoint}))}},generateImage:function(){this.imageData=this.diagram.makeImageData({scale:1}),this.isGenerated=!0},addNode:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var n,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("addTask",{db:this.$db,from:"dynamic",task:e});case 2:if(n=t.sent,i=this.newNode(e,a),i.taskId=n,this.diagram.model.addNodeData(i),-1!==this.usedVocabularies.indexOf(e)){t.next=15;break}return t.next=9,this.$db.vocabularies.get({pid:this.project.id});case 9:if(r=t.sent,!r){t.next=14;break}return"undefined"!==typeof r.used?r.used.push({v:e,t:a}):r.used=[{v:e,t:a}],t.next=14,this.$db.vocabularies.update(r.id,{used:r.used});case 14:this.$store.commit(m["y"],{v:e,t:a});case 15:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),saveModel:function(t){var e=t.toJson("TreeModel");this.$store.commit(m["c"],{isStatic:!1,data:e})},saveDiagram:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$db.diagrams.get({pid:this.project.id});case 2:if(e=t.sent,"undefined"!==typeof e){t.next=8;break}return t.next=6,this.$db.diagrams.add({pid:this.project.id,static:'{"class":"GraphLinksModel","nodeDataArray":[],"linkDataArray":[]}',dynamic:this.diagrams.dynamic});case 6:t.next=10;break;case 8:return t.next=10,this.$db.diagrams.update(e.id,{dynamic:this.diagrams.dynamic});case 10:this.isChanged=!1;case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),convertOrUpdateToTask:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("undefined"!==typeof this.selectedItem.data.taskId){t.next=7;break}return t.next=3,this.$store.dispatch("addTask",{db:this.$db,from:"dynamic",task:this.selectedItem.data.key});case 3:e=t.sent,this.diagram.model.commit((function(t){t.set(a.selectedItem.data,"taskId",e)}),"set task id"),t.next=10;break;case 7:return t.next=9,this.$db.tasks.update(this.selectedItem.data.taskId,{task:this.selectedItem.data.key,isDone:this.selectedItem.data.isDone});case 9:this.$store.commit(m["o"],{id:this.selectedItem.data.taskId,task:this.selectedItem.data.key,isDone:this.selectedItem.data.isDone});case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onChangeIsDone:function(t){var e=this;this.tmpSelectionData.data.isDone=t,this.selectedItem instanceof d["Node"]&&this.diagram.model.commit((function(a){a.set(e.selectedItem.data,"isDone",t)}),"toggle done")},onChangeKey:function(t){var e=this;this.tmpSelectionData.data.key=t,this.selectedItem instanceof d["Node"]&&this.diagram.model.commit((function(a){a.set(e.selectedItem.data,"key",t)}),"change key")},onChangedSelection:function(t){return this.selectedItem instanceof d["Node"]?this.tmpSelectionData={isLink:!1,data:v({},this.selectedItem.data)}:this.selectedItem instanceof d["Link"]?this.tmpSelectionData={isLink:!0,data:v({},this.selectedItem.data)}:void(this.tmpSelectionData={})}},components:{FileDownload:h["a"]}},y=k,C=(a("e689"),a("2877")),w=Object(C["a"])(y,n,i,!1,null,"79c0947a",null);e["default"]=w.exports}}]);
//# sourceMappingURL=chunk-0bad09a2.b73ecd55.js.map