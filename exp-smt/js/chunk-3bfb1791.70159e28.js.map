{"version":3,"sources":["webpack:///./src/views/DynamicDiagram.vue?0448","webpack:///./src/views/DynamicDiagram.vue?23b1","webpack:///src/views/DynamicDiagram.vue","webpack:///./src/views/DynamicDiagram.vue?88ee","webpack:///./src/views/DynamicDiagram.vue?0fa3"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","on","$event","showCreateVerb","directives","name","rawName","value","expression","domProps","target","composing","verb","err001","type","indexOf","_k","keyCode","key","newVerb","_s","_e","_l","idx","class","del","usedVocabularies","bold","addNode","removeVerb","functionsFinishedRate","loadAllActors","isGenerated","imageData","downloadFilename","generateImage","saveDiagram","ref","tmpSelectionData","isLink","selectedItem","data","category","isDone","onChangeIsDone","checked","_m","onChangeKey","staticRenderFns","$store","commit","diagram","model","addNodeData","newNode","isChanged","component"],"mappings":"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","file":"js/chunk-3bfb1791.70159e28.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DynamicDiagram.vue?vue&type=style&index=0&id=7d3d9d2e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DynamicDiagram.vue?vue&type=style&index=0&id=7d3d9d2e&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-2\"},[_c('h6',[_c('i',{staticClass:\"fas fa-project-diagram\"}),_c('fa-icon',{attrs:{\"icon\":\"running\"}}),_vm._v(\" Verbs\")],1),_c('div',[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){_vm.showCreateVerb=!_vm.showCreateVerb}}},[_c('fa-icon',{attrs:{\"icon\":\"plus-square\"}})],1)]),(_vm.showCreateVerb)?_c('div',{staticClass:\"row no-gutters\"},[_c('div',{staticClass:\"col-10\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.verb),expression:\"verb\"}],staticClass:\"form-control form-control-sm\",attrs:{\"type\":\"text\",\"placeholder\":\"Verb\"},domProps:{\"value\":(_vm.verb)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.verb=$event.target.value},function($event){_vm.err001=''}],\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.newVerb()}}}),(_vm.err001)?_c('span',{staticClass:\"badge text-danger\"},[_vm._v(_vm._s(_vm.err001))]):_vm._e()]),_c('div',{staticClass:\"col-2\"},[_c('a',{staticClass:\"btn btn-sm text-danger\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){_vm.showCreateVerb=!_vm.showCreateVerb}}},[_c('fa-icon',{attrs:{\"icon\":\"ban\"}})],1)])]):_vm._e(),_vm._l((_vm.verbs),function(verb,idx){return _c('div',{key:idx,staticClass:\"row no-gutters\"},[_c('div',{staticClass:\"col\"},[_c('small',{class:{del:_vm.usedVocabularies.indexOf(verb)!==-1, bold:_vm.usedVocabularies.indexOf(verb)===-1}},[_vm._v(_vm._s(verb))]),_c('ul',{staticClass:\"list-inline mb-0\"},[_c('li',{staticClass:\"list-inline-item\"},[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.addNode(verb, 'action')}}},[_c('fa-icon',{attrs:{\"icon\":\"comment\"}})],1)]),_c('li',{staticClass:\"list-inline-item\"},[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.addNode(verb, 'activity')}}},[_c('fa-icon',{attrs:{\"icon\":\"comment-alt\"}})],1)]),_c('li',{staticClass:\"list-inline-item\"},[_c('a',{staticClass:\"text-danger\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.removeVerb(idx)}}},[_c('fa-icon',{attrs:{\"icon\":\"trash\"}})],1)])])])])}),_c('div',[_vm._v(_vm._s(_vm.functionsFinishedRate)+\" \"),_c('fa-icon',{attrs:{\"icon\":\"percentage\"}})],1),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col mt-3\"},[_c('button',{staticClass:\"btn btn-secondary btn-sm\",on:{\"click\":function($event){return _vm.loadAllActors()}}},[_c('fa-icon',{attrs:{\"icon\":\"users\"}}),_vm._v(\" Load All Actors\")],1)])])],2),_c('div',{staticClass:\"col-8\"},[_c('div',{staticClass:\"row\"},[_c('ul',{staticClass:\"list-inline mb-0 mt-1\"},[(!_vm.isGenerated)?_c('li',{staticClass:\"list-inline-item\"},[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.generateImage()}}},[_c('fa-icon',{attrs:{\"icon\":\"image\"}}),_vm._v(\" Generate Image\")],1)]):_c('li',{staticClass:\"list-inline-item\"},[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){_vm.isGenerated=false}}},[_c('fa-icon',{attrs:{\"icon\":\"undo\"}})],1),_vm._v(\" \\n                    \"),_c('file-download',{attrs:{\"isPng\":true,\"title\":\"Download Diagram\",\"data\":_vm.imageData,\"downloadName\":_vm.downloadFilename}})],1),(_vm.isChanged)?_c('li',{staticClass:\"list-inline-item\"},[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.saveDiagram()}}},[_c('fa-icon',{attrs:{\"icon\":\"save\"}}),_vm._v(\" Save Diagram\")],1)]):_vm._e()])]),_c('div',{staticClass:\"row\"},[_c('div',{ref:\"dynamicDiagram\",staticClass:\"col\",attrs:{\"id\":\"dynamic-diagram\"}})])]),_c('div',{staticClass:\"col-2 pt-4\"},[_c('div',{staticClass:\"mb-3\",attrs:{\"id\":\"dynamic-diagram-overview\"}}),(_vm.tmpSelectionData.isLink===false)?_c('div',[(_vm.selectedItem.data.category === 'action' || _vm.selectedItem.data.category === 'activity')?_c('div',{staticClass:\"row\"},[_c('label',{staticClass:\"col-8 col-form-label\",attrs:{\"for\":\"mark-as-done\"}},[_vm._v(\"Mark as done\")]),_c('div',{staticClass:\"col-4\"},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\",\"id\":\"mark-as-done\"},domProps:{\"checked\":_vm.tmpSelectionData.data.isDone},on:{\"change\":function($event){return _vm.onChangeIsDone($event.target.checked)}}})])]):_vm._e(),_c('div',{staticClass:\"input-group input-group-sm mb-3\"},[_vm._m(0),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":_vm.tmpSelectionData.data.key},on:{\"input\":function($event){return _vm.onChangeKey($event.target.value)}}})])]):_vm._e()])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-group-prepend\"},[_c('div',{staticClass:\"input-group-text\"},[_vm._v(\"Title: \")])])}]\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"row\">\n        <div class=\"col-2\">\n            <h6><i class=\"fas fa-project-diagram\"></i> <fa-icon icon=\"running\" /> Verbs</h6>\n            <div><a href=\"javascript:;\" @click=\"showCreateVerb=!showCreateVerb\"><fa-icon icon=\"plus-square\" /></a></div>\n            <div v-if=\"showCreateVerb\" class=\"row no-gutters\">\n                <div class=\"col-10\">\n                    <input class=\"form-control form-control-sm\" type=\"text\" placeholder=\"Verb\" v-model=\"verb\" @input=\"err001=''\" @keyup.enter=\"newVerb()\" />\n                    <span v-if=\"err001\" class=\"badge text-danger\">{{ err001 }}</span>\n                </div>\n                <div class=\"col-2\">\n                    <a href=\"javascript:;\" class=\"btn btn-sm text-danger\" @click=\"showCreateVerb=!showCreateVerb\"><fa-icon icon=\"ban\" /></a>\n                </div>\n            </div>\n            <div class=\"row no-gutters\" v-for=\"(verb, idx) in verbs\" :key=\"idx\">\n                <div class=\"col\">\n                    <small :class=\"{del:usedVocabularies.indexOf(verb)!==-1, bold:usedVocabularies.indexOf(verb)===-1}\">{{ verb }}</small>\n                    <ul class=\"list-inline mb-0\">\n                        <li class=\"list-inline-item\">\n                            <a href=\"javascript:;\" @click=\"addNode(verb, 'action')\"><fa-icon icon=\"comment\" /></a>\n                        </li>\n                        <li class=\"list-inline-item\">\n                            <a href=\"javascript:;\" @click=\"addNode(verb, 'activity')\"><fa-icon icon=\"comment-alt\" /></a>\n                        </li>\n                        <li class=\"list-inline-item\">\n                            <a href=\"javascript:;\" class=\"text-danger\" @click=\"removeVerb(idx)\"><fa-icon icon=\"trash\" /></a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div>{{ functionsFinishedRate }} <fa-icon icon=\"percentage\" /></div>\n            <div class=\"row\">\n                <div class=\"col mt-3\">\n                    <button class=\"btn btn-secondary btn-sm\" @click=\"loadAllActors()\"><fa-icon icon=\"users\" /> Load All Actors</button>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"col-8\">\n            <!-- Diagram Buttons -->\n            <div class=\"row\">\n                <ul class=\"list-inline mb-0 mt-1\">\n                    <li v-if=\"!isGenerated\" class=\"list-inline-item\">\n                        <a href=\"javascript:;\" @click=\"generateImage()\"><fa-icon icon=\"image\" /> Generate Image</a>\n                    </li>\n                    <li v-else class=\"list-inline-item\">\n                        <a href=\"javascript:;\" @click=\"isGenerated=false\"><fa-icon icon=\"undo\" /></a>&nbsp;\n                        <file-download :isPng=\"true\" title=\"Download Diagram\" :data=\"imageData\" :downloadName=\"downloadFilename\" />\n                    </li>\n                    <li v-if=\"isChanged\" class=\"list-inline-item\">\n                        <a href=\"javascript:;\" @click=\"saveDiagram()\"><fa-icon icon=\"save\" /> Save Diagram</a>\n                    </li>\n                </ul>\n            </div>\n            <div class=\"row\">\n                <div id=\"dynamic-diagram\" ref=\"dynamicDiagram\" class=\"col\"></div>\n            </div>\n        </div>\n\n        <div class=\"col-2 pt-4\">\n            <div id=\"dynamic-diagram-overview\" class=\"mb-3\"></div>\n            <div v-if=\"tmpSelectionData.isLink===false\">\n                <div v-if=\"selectedItem.data.category === 'action' || selectedItem.data.category === 'activity'\" class=\"row\">\n                    <label for=\"mark-as-done\" class=\"col-8 col-form-label\">Mark as done</label>\n                    <div class=\"col-4\">\n                        <input type=\"checkbox\" id=\"mark-as-done\" class=\"form-control\" :checked=\"tmpSelectionData.data.isDone\" @change=\"onChangeIsDone($event.target.checked)\"/>\n                    </div>\n                </div>\n                <div class=\"input-group input-group-sm mb-3\">\n                    <div class=\"input-group-prepend\">\n                        <div class=\"input-group-text\">Title: </div>\n                    </div>\n                    <input type=\"text\" class=\"form-control\" :value=\"tmpSelectionData.data.key\" @input=\"onChangeKey($event.target.value)\" />\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import slug from 'slug';\n    import * as go from 'gojs';\n    import { mapState } from 'vuex';\n    import { DynamicDiagramRoleNode, DynamicDiagramActionNode, DynamicDiagramActivityNode, DynamicDiagramStartNode, DynamicDiagramEndNode, DynamicDiagramLink, TmpDynamicDiagramLink } from '../gotpls';\n    import { DIAGRAM_SET,VOCABULARY_SET_USED,VOCABULARY_VERB_REMOVE,VOCABULARY_VERB_ADD } from '../mutation-types';\n    import FileDownload from '@/components/FileDownload';\n\n    const $ = go.GraphObject.make;\n    const nextCategory = {actor: 'action', action: 'start', start: 'activity', activity: 'activity'};\n    const nextTitle = {start:'start', end:'end', actor:'New Actor', action:'New Action', activity: 'New Activity'};\n\n    export default {\n        name: \"DynamicDiagram\",\n\n        computed: {\n            ...mapState(['project', 'verbs', 'diagrams', 'used']),\n            usedVocabularies() {\n                return this.used.map(v => v.v);\n            },\n            downloadFilename() {\n                return slug(this.project.name, {mode: 'rfc3986'}) + '_dynamic.png';\n            },\n            newNode: function () {\n                return function (key, category, parent = '') {\n                    key === null && (key = nextTitle[category]);\n                    return {key, category, parent, isDone: false};\n                };\n            },\n            selectedItem() {\n                return this.diagram.selection.first();\n            },\n            functionsFinishedRate() {\n                return this.finishedRate;\n            }\n        },\n\n        data() {\n            return {\n                err001: null,\n                showCreateVerb: false,\n                verb: '',\n                finishedRate: 0,\n\n                imageData: '',\n                isGenerated: false,\n                isChanged: false,\n\n                diagram: {},\n\n                tmpSelectionData: {},\n            }\n        },\n\n        mounted() {\n            this.diagram = $(go.Diagram, this.$refs.dynamicDiagram, {\n                layout: $(go.TreeLayout),\n                'commandHandler.deletesTree': true,\n                'undoManager.isEnabled': true,\n                'ChangedSelection': e => {\n                    this.onChangedSelection(e);\n                },\n            });\n\n            let nodeTpls = new go.Map();\n            nodeTpls.add('actor', DynamicDiagramRoleNode);\n            nodeTpls.add('action', DynamicDiagramActionNode);\n            nodeTpls.add('start', DynamicDiagramStartNode);\n            nodeTpls.add('activity', DynamicDiagramActivityNode);\n            nodeTpls.add('end', DynamicDiagramEndNode);\n            this.diagram.nodeTemplateMap = nodeTpls;\n            this.diagram.linkTemplate = DynamicDiagramLink;\n\n            this.diagram.contextMenu = $('ContextMenu',\n                $('ContextMenuButton', $(go.TextBlock, {margin: new go.Margin(6, 10, 6, 10), font: 'bold .8rem \"Nunito\",sans-serif'}, 'New Actor'), {click: this.onContextMenuButtonClick('New Actor', 'actor')}),\n                $('ContextMenuButton', $(go.TextBlock, {margin: new go.Margin(6, 10, 6, 10), font: 'bold .8rem \"Nunito\",sans-serif'}, 'New Action'), {click: this.onContextMenuButtonClick('New Action', 'action')}),\n                $('ContextMenuButton', $(go.TextBlock, {margin: new go.Margin(6, 10, 6, 10), font: 'bold .8rem \"Nunito\",sans-serif'}, 'Start Point'), {click: this.onContextMenuButtonClick('start', 'start')}),\n                $('ContextMenuButton', $(go.TextBlock, {margin: new go.Margin(6, 10, 6, 10), font: 'bold .8rem \"Nunito\",sans-serif'}, 'New Activity'), {click: this.onContextMenuButtonClick('New Activity', 'activity')}),\n                $('ContextMenuButton', $(go.TextBlock, {margin: new go.Margin(6, 10, 6, 10), font: 'bold .8rem \"Nunito\",sans-serif'}, 'End Point'), {click: this.onContextMenuButtonClick('end', 'end')}),\n            );\n            this.diagram.toolManager.linkingTool.temporaryLink = TmpDynamicDiagramLink;\n\n            this.diagram.commandHandler.doKeyDown = () => {\n                const e = this.diagram.lastInput;\n                if (e.key.charCodeAt(0) === 9 && this.selectedItem instanceof go.Node) {\n                    if (typeof nextCategory[this.selectedItem.data.category] !== 'undefined') {\n                        this.diagram.model.commit(m => {\n                            const data = this.newNode(null, nextCategory[this.selectedItem.data.category], this.selectedItem.data.key);\n                            m.addNodeData(data);\n                            const node = this.diagram.findNodeForData(data);\n                            this.diagram.select(node);\n                        }, 'new item');\n                        return;\n                    }\n                }\n                go.CommandHandler.prototype.doKeyDown.call(this.diagram.commandHandler);\n            };\n\n            if (this.diagrams.dynamic) {\n                this.diagram.model = go.Model.fromJson(this.diagrams.dynamic);\n            } else {\n                this.diagram.model = $(go.TreeModel, {nodeDataArray: [], linkDataArray: []});\n            }\n            const overview = $(go.Overview, 'dynamic-diagram-overview', {observed: this.diagram, contentAlignment: go.Spot.Center});\n            overview.box.elt(0).stroke = $(go.Brush, go.Brush.Solid, {color: 'red'});\n            this.caculateFinishedRate();\n            this.diagram.addModelChangedListener(evt => {\n                this.isChanged = true;\n                if (evt.isTransactionFinished) {\n                    this.caculateFinishedRate();\n                    this.saveModel(evt.model);\n                }\n            });\n        },\n\n        methods: {\n            async newVerb() {\n                let vocabulary = await this.$db.vocabularies.get({pid: this.project.id});\n                if (vocabulary) {\n                    if (vocabulary.verbs.indexOf(this.verb) === -1) {\n                        vocabulary.verbs.push(this.verb);\n                        await this.$db.vocabularies.update(vocabulary.id, {verbs: vocabulary.verbs});\n                    }\n                } else {\n                    vocabulary = {pid: this.project.id, nouns:[], verbs:[this.verb], used:[]};\n                    await this.$db.vocabularies.add(vocabulary);\n                }\n                this.$store.commit(VOCABULARY_VERB_ADD, this.verb);\n            },\n\n            async removeVerb(idx) {\n                const verb = this.verbs[idx];\n                let vocabulary = await this.$db.vocabularies.get({pid: this.project.id});\n                let i;\n                if ((i = vocabulary.verbs.indexOf(verb)) !== -1) {\n                    vocabulary.verbs.splice(i, 1);\n                    await this.$db.vocabularies.update(vocabulary.id, {verbs: vocabulary.verbs});\n                }\n                this.$store.commit(VOCABULARY_VERB_REMOVE, idx);\n            },\n\n            caculateFinishedRate() {\n                const total = this.diagram.model.nodeDataArray.reduce((i, v) => {\n                    return v.category === 'action' || v.category === 'activity' ? ++i : i;\n                }, 0);\n                if (total === 0) return 0;\n                const n = this.diagram.model.nodeDataArray.reduce((i, v) => {\n                    return (v.category === 'action' || v.category === 'activity') && v.isDone ? ++i : i;\n                }, 0);\n                this.finishedRate = (n / total * 100).toFixed(0);\n            },\n\n            loadAllActors() {\n                this.used.map(v => {\n                    if (v.t === 'actor') {\n                        const data = this.newNode(v.v, 'actor');\n                        this.diagram.model.addNodeData(data);\n                    }\n                });\n            },\n\n            onContextMenuButtonClick(key, category) {\n                return e => {\n                    e.diagram.commit(d => {\n                        const data = this.newNode(key, category);\n                        d.model.addNodeData(data);\n                        const part = d.findPartForData(data);\n                        part.location = d.toolManager.contextMenuTool.mouseDownPoint;\n                    });\n                }\n            },\n\n            generateImage() {\n                this.imageData = this.diagram.makeImageData({scale: 1});\n                this.isGenerated = true;\n            },\n\n            async addNode(verb, category) {\n                this.diagram.model.addNodeData(this.newNode(verb, category));\n\n                if (this.usedVocabularies.indexOf(verb) === -1) { // not found, add to `used`\n                    let vocabulary = await this.$db.vocabularies.get({pid: this.project.id});\n                    if (vocabulary) {\n                        typeof vocabulary.used !== 'undefined' ?\n                            vocabulary.used.push({v:verb,t:category}) :\n                            (vocabulary.used = [{v:verb,t:category}])\n                        ;\n                        await this.$db.vocabularies.update(vocabulary.id, {used: vocabulary.used});\n                    }\n                    this.$store.commit(VOCABULARY_SET_USED, {v:verb,t:category});\n                }\n            },\n\n            saveModel(model) {\n                // TODO: link\n                const json = model.toJson('TreeModel') //.replace(',\\n  \"linkDataArray\": []', '');\n                this.$store.commit(DIAGRAM_SET, {isStatic: false, data: json});\n            },\n\n            async saveDiagram() {\n                let diagram = await this.$db.diagrams.get({pid: this.project.id});\n                if (typeof diagram === 'undefined') {\n                    await this.$db.diagrams.add({pid: this.project.id, static: '{\"class\":\"GraphLinksModel\",\"nodeDataArray\":[],\"linkDataArray\":[]}', dynamic: this.diagrams.dynamic});\n                } else {\n                    await this.$db.diagrams.update(diagram.id, {dynamic: this.diagrams.dynamic});\n                }\n                this.isChanged = false;\n            },\n\n            onChangeIsDone(v) {\n                this.tmpSelectionData.data.isDone = v;\n                if (this.selectedItem instanceof go.Node) {\n                    this.diagram.model.commit(m => {\n                        m.set(this.selectedItem.data, 'isDone', v);\n                    }, 'toggle done');\n                }\n            },\n\n            onChangeKey(v) {\n                this.tmpSelectionData.data.key = v;\n                if (this.selectedItem instanceof go.Node) {\n                    this.diagram.model.commit(m => {\n                        m.set(this.selectedItem.data, 'key', v);\n                    }, 'change key');\n                }\n            },\n\n            onChangedSelection(e) {\n                if (this.selectedItem instanceof go.Node) {\n                    // this.diagram.centerRect(this.selectedItem.actualBounds);\n                    return this.tmpSelectionData = {isLink: false, data: {...this.selectedItem.data}};\n                } else if (this.selectedItem instanceof go.Link) {\n                    return this.tmpSelectionData = {isLink: true, data: {...this.selectedItem.data}};\n                }\n                this.tmpSelectionData = {};\n            },\n\n        },\n\n        components: {\n            FileDownload\n        }\n    }\n</script>\n\n<style scoped>\n    #dynamic-diagram {\n        background-color: var(--white);\n        min-height: 30rem;\n    }\n\n    #dynamic-diagram-overview {\n        height: 6rem;\n        background-color: white;\n        border: thin solid var(--primary);\n    }\n\n    .del {\n        text-decoration: line-through;\n    }\n\n    .bold {\n        font-weight: bold;\n    }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DynamicDiagram.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DynamicDiagram.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DynamicDiagram.vue?vue&type=template&id=7d3d9d2e&scoped=true&\"\nimport script from \"./DynamicDiagram.vue?vue&type=script&lang=js&\"\nexport * from \"./DynamicDiagram.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DynamicDiagram.vue?vue&type=style&index=0&id=7d3d9d2e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d3d9d2e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}